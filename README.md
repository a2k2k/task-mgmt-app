# tma

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

See [nx.md](./nx.md) for more information


## Getting Started
This is a monorepo based on following technologies. 
- NestJS for backend services.
- React for UI. This Project uses tailwind css framework and flowbite-react UI component library built using tailwind css for the UI components.
- Nx build system.
- docker, docker-compose

This project uses container based development in which the source code on host machine is mounted on the docker containers. Actual builds happen in the docker container and the containers have their own copy of node_modules (shared across containers). All the apps work out of a single package.json file and nx takes care of producing minimum bundles based on the dependency analysis.

To get started, install the necessary tools.

- Install ```node/npm```. 
- Install ```nx``` globally. You can skip this and use npx for running nx commands.

Clone the repository and run ```npm install``` (Npm install here is mostly required for the vscode tooling to work properly as we are coding on the host machine.).

Run ```docker-compose up``` from the root of the repository. This will spin up all the docker containers along with **mongodb** container. Add the following configuration to your .vscode/launch.json for debugging the backend service.

```
        {
            "type": "node",
            "request": "attach",
            "port": 9222,
            "remoteRoot": "/code/",
            "sourceMaps": true,
            "localRoot": "${workspaceFolder}",
            "cwd": "${workspaceFolder}",
            "name": "task-mgmt-api-service",
        }
```

To directly browse the code inside the container and do the development there, we can use vscode devcontainers extension to attach vscode to the container and develop. This would not require us to do ```npm install``` locally but I think we would end up having multiple vscode instances for multiple services. 

# Project Structure
All the applications are put under apps directory.

All the reusable libs are placed under libs folder with sub-directory backend containing libraries shared by backend services and shared sub-directory contains code shared by both UI and services.

Tools directory contains any webpack customizations and docker files at this point. We can add other tooling here like custom generators, build customizations, initialization scripts, etc.

To generate new services/controllers/etc under backend, please see list of available generators [here](https://nx.dev/packages/nest/generators)

## Services

Following containers are created.
- task-mgmt-api-service: http://localhost:3000/api
> This is the backend service for the application. Debug port is 9221
- ui: http://localhost:4200
> UI endpoint.

## Shared Libraries
### Backend
**db-access**

Contains services for accessing databases and performing crud operations, storing/retrieving information from database. 

**auth**

Authentication services. Takes care of user authencation and token verification.

### shared

**api-model**

This module contains all models/utils shared between UI and backend both.

## Production Builds
There is a dockerfile placed in the root directory of each containerized application which will be used for production images. Jenkinsfile will be used for pushing the images to docker repository.
